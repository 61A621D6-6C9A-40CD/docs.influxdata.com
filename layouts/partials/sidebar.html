<div class="product-sidebar" id="product-sidebar">
    {{ $currentNode := . }}
    {{ range (index .Site.Menus .Section) }}
        {{ range .Children }}
        <div class="product-sidebar--section-title">
            <a class="product-sidebar--nav-item{{ if or ($currentNode.IsMenuCurrent $currentNode.Section .) ($currentNode.HasMenuCurrent $currentNode.Section .) }} active{{end}}" href="{{.URL}}">{{ .Name }}</a>
        </div>
            {{ if .HasChildren }}
            <section class="product-sidebar--section">
                {{ range .Children }}
                <a class="product-sidebar--page{{ if or ($currentNode.IsMenuCurrent $currentNode.Section .) ($currentNode.HasMenuCurrent $currentNode.Section .) }} active{{end}}" href="{{ .URL }}">{{ .Name }}</a>
                {{ end }}
            </section>
            {{end}}
        {{end}}
    {{end}}
    {{ range .Site.Menus.products }}
        {{ if eq .Identifier $currentNode.Section }}
        <div class="product-sidebar--section-title">
            <a class="product-sidebar--nav-item" href="{{ .URL }}">{{ .Name }} Versions</a>
        </div>
        <section class="product-sidebar--section">
            {{ range (index $.Site.Menus $currentNode.Section) }}
            <a class="product-sidebar--page{{ if or ($currentNode.IsMenuCurrent $currentNode.Section .) ($currentNode.HasMenuCurrent $currentNode.Section .) }} active{{end}}" href="{{ .URL }}">{{ .Name }}</a>
            {{end}}
        </section>
        {{end}}

    {{end}}
</div>
